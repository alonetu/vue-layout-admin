{"remainingRequest":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\FontEnd\\Project\\vue-layout-admin\\src\\components\\tags.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\src\\components\\tags.vue","mtime":1589624182533},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1588831399122},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1588831399341},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":1585878924250},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1585878907314},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585878908583},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1588831399341}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnRhZy1yb3V0ZXIgew0KICBoZWlnaHQ6IDMwcHg7DQogIGJhY2tncm91bmQ6ICNmZmY7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjJmMmYyOw0KICBwYWRkaW5nLWxlZnQ6IDExcHg7DQogIHBhZGRpbmctcmlnaHQ6IDE2cHg7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIC5lbC10YWctLXBsYWluIHsNCiAgICBjb2xvcjogIzQ5NTA2MDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZDhkY2U1Ow0KICAgIG1hcmdpbi10b3A6IDNweDsNCiAgICBtYXJnaW4tbGVmdDogNXB4Ow0KICB9DQogIC5hY3RpdmUtdGFnIHsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDA5ZWZmOw0KICAgIGNvbG9yOiAjZmZmOw0KICAgIGJvcmRlci1jb2xvcjogIzQwOWVmZjsNCiAgfQ0KICAuZWwtdGFnLS1wbGFpbiAuZWwtdGFnX19jbG9zZSB7DQogICAgY29sb3I6ICNmZmY7DQogICAgJjpob3ZlciB7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzYzNjM2Ow0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["tags.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tags.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"tag-router\">\r\n    <el-tag\r\n      size=\"small\"\r\n      effect=\"plain\"\r\n      v-for=\"item in tags\"\r\n      :key=\"item.path\"\r\n      :type=\"item.type\"\r\n      :class=\"item.path === path? 'active-tag': ''\"\r\n      :closable=\"item.label==='首页'? false: true\"\r\n      @click=\"switchPage(item.path)\"\r\n      @close=\"handleClose(item)\"\r\n    >\r\n      {{ item.label }}\r\n    </el-tag>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport {getAllOpenPage} from '@/utils/'\r\n\r\nexport default {\r\n  name: 'tag-router',\r\n  data() {\r\n    return {\r\n      path: '/home',\r\n      tags: [\r\n        {\r\n          icon: 'el-icon-tickets',\r\n          label: '首页',\r\n          path: '/home'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.path = window.location.pathname;\r\n    // 如果sessionStorage中保存了所有打开的页面，则从sessionStage中取值\r\n    this.tags = getAllOpenPage();\r\n  },\r\n  computed: {\r\n    ...mapGetters(['allOpenPage'])\r\n  },\r\n  watch: {\r\n    /**\r\n     * 监听路由变化\r\n     * 记录当前路由赋给当前tag\r\n     */\r\n    $route() {\r\n      this.path = window.location.pathname;\r\n    },\r\n    /**\r\n     * 监听vuex中保存所有打开页面\r\n     */\r\n    allOpenPage() {\r\n      this.tags = this.allOpenPage;\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 切换标签\r\n     */\r\n    switchPage(path) {\r\n      this.path = path;\r\n      this.$router.push({ path });\r\n      this.$emit('switchPage', path);\r\n    },\r\n    /**\r\n     * 关闭标签时跳转到前一个页面\r\n     */\r\n    handleClose(tag) {\r\n      let index = this.tags.indexOf(tag);\r\n      let preTag = this.tags[index - 1];\r\n      this.tags.splice(index, 1);\r\n      this.path = preTag.path;\r\n      this.$store.commit('allOpenPage', this.tags);\r\n      // 如果关闭标签的前一个标签是当前页面则不做跳转\r\n      if(this.path === window.location.pathname) { return }\r\n      this.$router.push(this.path);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.tag-router {\r\n  height: 30px;\r\n  background: #fff;\r\n  border-bottom: 1px solid #f2f2f2;\r\n  padding-left: 11px;\r\n  padding-right: 16px;\r\n  box-sizing: border-box;\r\n  .el-tag--plain {\r\n    color: #495060;\r\n    border: 1px solid #d8dce5;\r\n    margin-top: 3px;\r\n    margin-left: 5px;\r\n  }\r\n  .active-tag {\r\n    background-color: #409eff;\r\n    color: #fff;\r\n    border-color: #409eff;\r\n  }\r\n  .el-tag--plain .el-tag__close {\r\n    color: #fff;\r\n    &:hover {\r\n      background-color: #363636;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}