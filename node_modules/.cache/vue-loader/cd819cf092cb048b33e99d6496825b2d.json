{"remainingRequest":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\FontEnd\\Project\\vue-layout-admin\\src\\components\\tags.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\src\\components\\tags.vue","mtime":1589624182533},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585878908583},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1585878908904},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585878908583},{"path":"D:\\FontEnd\\Project\\vue-layout-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1588831399341}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnDQppbXBvcnQge2dldEFsbE9wZW5QYWdlfSBmcm9tICdAL3V0aWxzLycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAndGFnLXJvdXRlcicsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBhdGg6ICcvaG9tZScsDQogICAgICB0YWdzOiBbDQogICAgICAgIHsNCiAgICAgICAgICBpY29uOiAnZWwtaWNvbi10aWNrZXRzJywNCiAgICAgICAgICBsYWJlbDogJ+mmlumhtScsDQogICAgICAgICAgcGF0aDogJy9ob21lJw0KICAgICAgICB9DQogICAgICBdDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMucGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTsNCiAgICAvLyDlpoLmnpxzZXNzaW9uU3RvcmFnZeS4reS/neWtmOS6huaJgOacieaJk+W8gOeahOmhtemdou+8jOWImeS7jnNlc3Npb25TdGFnZeS4reWPluWAvA0KICAgIHRoaXMudGFncyA9IGdldEFsbE9wZW5QYWdlKCk7DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbJ2FsbE9wZW5QYWdlJ10pDQogIH0sDQogIHdhdGNoOiB7DQogICAgLyoqDQogICAgICog55uR5ZCs6Lev55Sx5Y+Y5YyWDQogICAgICog6K6w5b2V5b2T5YmN6Lev55Sx6LWL57uZ5b2T5YmNdGFnDQogICAgICovDQogICAgJHJvdXRlKCkgew0KICAgICAgdGhpcy5wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOw0KICAgIH0sDQogICAgLyoqDQogICAgICog55uR5ZCsdnVleOS4reS/neWtmOaJgOacieaJk+W8gOmhtemdog0KICAgICAqLw0KICAgIGFsbE9wZW5QYWdlKCkgew0KICAgICAgdGhpcy50YWdzID0gdGhpcy5hbGxPcGVuUGFnZTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKioNCiAgICAgKiDliIfmjaLmoIfnrb4NCiAgICAgKi8NCiAgICBzd2l0Y2hQYWdlKHBhdGgpIHsNCiAgICAgIHRoaXMucGF0aCA9IHBhdGg7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGggfSk7DQogICAgICB0aGlzLiRlbWl0KCdzd2l0Y2hQYWdlJywgcGF0aCk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDlhbPpl63moIfnrb7ml7bot7PovazliLDliY3kuIDkuKrpobXpnaINCiAgICAgKi8NCiAgICBoYW5kbGVDbG9zZSh0YWcpIHsNCiAgICAgIGxldCBpbmRleCA9IHRoaXMudGFncy5pbmRleE9mKHRhZyk7DQogICAgICBsZXQgcHJlVGFnID0gdGhpcy50YWdzW2luZGV4IC0gMV07DQogICAgICB0aGlzLnRhZ3Muc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgIHRoaXMucGF0aCA9IHByZVRhZy5wYXRoOw0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdhbGxPcGVuUGFnZScsIHRoaXMudGFncyk7DQogICAgICAvLyDlpoLmnpzlhbPpl63moIfnrb7nmoTliY3kuIDkuKrmoIfnrb7mmK/lvZPliY3pobXpnaLliJnkuI3lgZrot7PovawNCiAgICAgIGlmKHRoaXMucGF0aCA9PT0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKSB7IHJldHVybiB9DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLnBhdGgpOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["tags.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tags.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"tag-router\">\r\n    <el-tag\r\n      size=\"small\"\r\n      effect=\"plain\"\r\n      v-for=\"item in tags\"\r\n      :key=\"item.path\"\r\n      :type=\"item.type\"\r\n      :class=\"item.path === path? 'active-tag': ''\"\r\n      :closable=\"item.label==='首页'? false: true\"\r\n      @click=\"switchPage(item.path)\"\r\n      @close=\"handleClose(item)\"\r\n    >\r\n      {{ item.label }}\r\n    </el-tag>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport {getAllOpenPage} from '@/utils/'\r\n\r\nexport default {\r\n  name: 'tag-router',\r\n  data() {\r\n    return {\r\n      path: '/home',\r\n      tags: [\r\n        {\r\n          icon: 'el-icon-tickets',\r\n          label: '首页',\r\n          path: '/home'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.path = window.location.pathname;\r\n    // 如果sessionStorage中保存了所有打开的页面，则从sessionStage中取值\r\n    this.tags = getAllOpenPage();\r\n  },\r\n  computed: {\r\n    ...mapGetters(['allOpenPage'])\r\n  },\r\n  watch: {\r\n    /**\r\n     * 监听路由变化\r\n     * 记录当前路由赋给当前tag\r\n     */\r\n    $route() {\r\n      this.path = window.location.pathname;\r\n    },\r\n    /**\r\n     * 监听vuex中保存所有打开页面\r\n     */\r\n    allOpenPage() {\r\n      this.tags = this.allOpenPage;\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 切换标签\r\n     */\r\n    switchPage(path) {\r\n      this.path = path;\r\n      this.$router.push({ path });\r\n      this.$emit('switchPage', path);\r\n    },\r\n    /**\r\n     * 关闭标签时跳转到前一个页面\r\n     */\r\n    handleClose(tag) {\r\n      let index = this.tags.indexOf(tag);\r\n      let preTag = this.tags[index - 1];\r\n      this.tags.splice(index, 1);\r\n      this.path = preTag.path;\r\n      this.$store.commit('allOpenPage', this.tags);\r\n      // 如果关闭标签的前一个标签是当前页面则不做跳转\r\n      if(this.path === window.location.pathname) { return }\r\n      this.$router.push(this.path);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.tag-router {\r\n  height: 30px;\r\n  background: #fff;\r\n  border-bottom: 1px solid #f2f2f2;\r\n  padding-left: 11px;\r\n  padding-right: 16px;\r\n  box-sizing: border-box;\r\n  .el-tag--plain {\r\n    color: #495060;\r\n    border: 1px solid #d8dce5;\r\n    margin-top: 3px;\r\n    margin-left: 5px;\r\n  }\r\n  .active-tag {\r\n    background-color: #409eff;\r\n    color: #fff;\r\n    border-color: #409eff;\r\n  }\r\n  .el-tag--plain .el-tag__close {\r\n    color: #fff;\r\n    &:hover {\r\n      background-color: #363636;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}