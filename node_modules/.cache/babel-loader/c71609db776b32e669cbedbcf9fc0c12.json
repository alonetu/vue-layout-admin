{"remainingRequest":"D:\\FontEnd\\Project\\vue-simple-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\FontEnd\\Project\\vue-simple-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\FontEnd\\Project\\vue-simple-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\FontEnd\\Project\\vue-simple-admin\\src\\components\\tags.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\FontEnd\\Project\\vue-simple-admin\\src\\components\\tags.vue","mtime":1589534309012},{"path":"D:\\FontEnd\\Project\\vue-simple-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585878908583},{"path":"D:\\FontEnd\\Project\\vue-simple-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1585878908904},{"path":"D:\\FontEnd\\Project\\vue-simple-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1585878908583},{"path":"D:\\FontEnd\\Project\\vue-simple-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1588831399341}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9Gb250RW5kL1Byb2plY3QvdnVlLXNpbXBsZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0QWxsT3BlblBhZ2UgfSBmcm9tICdAL3V0aWxzLyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndGFnLXJvdXRlcicsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhdGg6ICcvaG9tZScsCiAgICAgIHRhZ3M6IFt7CiAgICAgICAgaWNvbjogJ2VsLWljb24tdGlja2V0cycsCiAgICAgICAgbGFiZWw6ICfpppbpobUnLAogICAgICAgIHBhdGg6ICcvaG9tZScKICAgICAgfV0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOyAvLyDlpoLmnpxzZXNzaW9uU3RvcmFnZeS4reS/neWtmOS6huaJgOacieaJk+W8gOeahOmhtemdou+8jOWImeS7jnNlc3Npb25TdGFnZeS4reWPluWAvAoKICAgIHRoaXMudGFncyA9IGdldEFsbE9wZW5QYWdlKCk7CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2FsbE9wZW5QYWdlJ10pKSwKICB3YXRjaDogewogICAgLyoqDQogICAgICog55uR5ZCs6Lev55Sx5Y+Y5YyWDQogICAgICog6K6w5b2V5b2T5YmN6Lev55Sx6LWL57uZ5b2T5YmNdGFnDQogICAgICovCiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSgpIHsKICAgICAgdGhpcy5wYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDnm5HlkKx2dWV45Lit5L+d5a2Y5omA5pyJ5omT5byA6aG16Z2iDQogICAgICovCiAgICBhbGxPcGVuUGFnZTogZnVuY3Rpb24gYWxsT3BlblBhZ2UoKSB7CiAgICAgIHRoaXMudGFncyA9IHRoaXMuYWxsT3BlblBhZ2U7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioNCiAgICAgKiDliIfmjaLmoIfnrb4NCiAgICAgKi8KICAgIHN3aXRjaFBhZ2U6IGZ1bmN0aW9uIHN3aXRjaFBhZ2UocGF0aCkgewogICAgICB0aGlzLnBhdGggPSBwYXRoOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogcGF0aAogICAgICB9KTsKICAgICAgdGhpcy4kZW1pdCgnc3dpdGNoUGFnZScsIHBhdGgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiDlhbPpl63moIfnrb7ml7bot7PovazliLDliY3kuIDkuKrpobXpnaINCiAgICAgKi8KICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZSh0YWcpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy50YWdzLmluZGV4T2YodGFnKTsKICAgICAgdmFyIHByZVRhZyA9IHRoaXMudGFnc1tpbmRleCAtIDFdOwogICAgICB0aGlzLnRhZ3Muc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5wYXRoID0gcHJlVGFnLnBhdGg7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWxsT3BlblBhZ2UnLCB0aGlzLnRhZ3MpOyAvLyDlpoLmnpzlhbPpl63moIfnrb7nmoTliY3kuIDkuKrmoIfnrb7mmK/lvZPliY3pobXpnaLliJnkuI3lgZrot7PovawKCiAgICAgIGlmICh0aGlzLnBhdGggPT09IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5wYXRoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["tags.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAmBA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,cAAA,QAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,IAAA,EAAA,CACA;AACA,QAAA,IAAA,EAAA,iBADA;AAEA,QAAA,KAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OADA;AAFA,KAAA;AAUA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,IAAA,GAAA,MAAA,CAAA,QAAA,CAAA,QAAA,CADA,CAEA;;AACA,SAAA,IAAA,GAAA,cAAA,EAAA;AACA,GAlBA;AAmBA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,aAAA,CAAA,CADA,CAnBA;AAsBA,EAAA,KAAA,EAAA;AACA;;;;AAIA,IAAA,MALA,oBAKA;AACA,WAAA,IAAA,GAAA,MAAA,CAAA,QAAA,CAAA,QAAA;AACA,KAPA;;AAQA;;;AAGA,IAAA,WAXA,yBAWA;AACA,WAAA,IAAA,GAAA,KAAA,WAAA;AACA;AAbA,GAtBA;AAqCA,EAAA,OAAA,EAAA;AACA;;;AAGA,IAAA,UAJA,sBAIA,IAJA,EAIA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA,WAAA,KAAA,CAAA,YAAA,EAAA,IAAA;AACA,KARA;;AASA;;;AAGA,IAAA,WAZA,uBAYA,GAZA,EAYA;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AACA,UAAA,MAAA,GAAA,KAAA,IAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,WAAA,IAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,WAAA,IAAA,GAAA,MAAA,CAAA,IAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,KAAA,IAAA,EALA,CAMA;;AACA,UAAA,KAAA,IAAA,KAAA,MAAA,CAAA,QAAA,CAAA,QAAA,EAAA;AAAA;AAAA;;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,KAAA,IAAA;AACA;AArBA;AArCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"tag-router\">\r\n    <el-tag\r\n      size=\"small\"\r\n      effect=\"plain\"\r\n      v-for=\"item in tags\"\r\n      :key=\"item.path\"\r\n      :type=\"item.type\"\r\n      :class=\"item.path === path? 'active-tag': ''\"\r\n      :closable=\"item.label==='首页'? false: true\"\r\n      @click=\"switchPage(item.path)\"\r\n      @close=\"handleClose(item)\"\r\n    >\r\n      {{ item.label }}\r\n    </el-tag>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport {getAllOpenPage} from '@/utils/'\r\n\r\nexport default {\r\n  name: 'tag-router',\r\n  data() {\r\n    return {\r\n      path: '/home',\r\n      tags: [\r\n        {\r\n          icon: 'el-icon-tickets',\r\n          label: '首页',\r\n          path: '/home'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.path = window.location.pathname;\r\n    // 如果sessionStorage中保存了所有打开的页面，则从sessionStage中取值\r\n    this.tags = getAllOpenPage();\r\n  },\r\n  computed: {\r\n    ...mapGetters(['allOpenPage'])\r\n  },\r\n  watch: {\r\n    /**\r\n     * 监听路由变化\r\n     * 记录当前路由赋给当前tag\r\n     */\r\n    $route() {\r\n      this.path = window.location.pathname;\r\n    },\r\n    /**\r\n     * 监听vuex中保存所有打开页面\r\n     */\r\n    allOpenPage() {\r\n      this.tags = this.allOpenPage;\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 切换标签\r\n     */\r\n    switchPage(path) {\r\n      this.path = path;\r\n      this.$router.push({ path });\r\n      this.$emit('switchPage', path);\r\n    },\r\n    /**\r\n     * 关闭标签时跳转到前一个页面\r\n     */\r\n    handleClose(tag) {\r\n      let index = this.tags.indexOf(tag);\r\n      let preTag = this.tags[index - 1];\r\n      this.tags.splice(index, 1);\r\n      this.path = preTag.path;\r\n      this.$store.commit('allOpenPage', this.tags);\r\n      // 如果关闭标签的前一个标签是当前页面则不做跳转\r\n      if(this.path === window.location.pathname) { return }\r\n      this.$router.push(this.path);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.tag-router {\r\n  height: 30px;\r\n  background: #fff;\r\n  border-bottom: 1px solid #f2f2f2;\r\n  padding-left: 11px;\r\n  padding-right: 16px;\r\n  box-sizing: border-box;\r\n  .el-tag--plain {\r\n    color: #495060;\r\n    border: 1px solid #d8dce5;\r\n    margin-top: 3px;\r\n    margin-left: 5px;\r\n  }\r\n  .active-tag {\r\n    background-color: #409eff;\r\n    color: #fff;\r\n    border-color: #409eff;\r\n  }\r\n  .el-tag--plain .el-tag__close {\r\n    color: #fff;\r\n    &:hover {\r\n      background-color: #363636;\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}